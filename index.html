<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSE Announcements Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“¢ BSE Announcements Dashboard</h1>
            <div class="status-bar">
                <div class="status-indicator" id="statusIndicator">
                    <span class="status-dot"></span>
                    <span id="statusText">Initializing...</span>
                </div>
                <div class="last-update" id="lastUpdate"></div>
            </div>
        </header>

        <div class="controls">
            <button id="toggleBtn" class="btn btn-primary">Start Monitoring</button>
            <button id="clearBtn" class="btn btn-secondary">Clear All</button>
            <button id="testSoundBtn" class="btn btn-test">ğŸ”Š Test Sound</button>
            <button id="kiteConfigBtn" class="btn btn-kite">âš™ï¸ Kite Config</button>
            <button id="kiteLoginBtn" class="btn btn-kite-login" style="display: none;">ğŸ” Login to Kite</button>
            <button id="testTataSilverBtn" class="btn btn-test-order">ğŸ§ª Test: Buy 1 Tata Silver</button>
            <button id="refreshPricesBtn" class="btn btn-secondary">ğŸ”„ Refresh Stock Prices</button>
            <label class="sound-toggle">
                <input type="checkbox" id="soundToggle" checked>
                <span>ğŸ”” Sound Notifications</span>
            </label>
            <label class="sound-toggle">
                <input type="checkbox" id="filterAmountToggle">
                <span>ğŸ’° Show Only With Amounts</span>
            </label>
        </div>

        <!-- Kite Config Modal -->
        <div id="kiteModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="modal-close">&times;</span>
                <h2>âš™ï¸ Kite API Configuration</h2>
                <div class="modal-form">
                    <label>API Key:</label>
                    <input type="text" id="kiteApiKey" placeholder="Enter your Kite API Key">
                    <label>API Secret:</label>
                    <input type="password" id="kiteApiSecret" placeholder="Enter your Kite API Secret">
                    <label>Redirect URL (HTTPS required):</label>
                    <input type="text" id="kiteRedirectUrl" placeholder="https://your-domain.com/kite/callback">
                    <label>Postback URL (HTTPS required):</label>
                    <input type="text" id="kitePostbackUrl" placeholder="https://your-domain.com/kite/postback">
                    <button id="saveKiteConfig" class="btn btn-primary">Save Configuration</button>
                    <p class="modal-info">
                        <strong>ğŸ“ Note:</strong> If you're using Render, add these as <strong>Environment Variables</strong> in Render dashboard instead of using this form.<br><br>
                        <strong>For Render (Production):</strong><br>
                        Add in Render Dashboard â†’ Environment tab:<br>
                        <code>KITE_API_KEY</code>, <code>KITE_API_SECRET</code>, <code>KITE_REDIRECT_URL</code>, <code>KITE_POSTBACK_URL</code><br><br>
                        <strong>For Local Development:</strong><br>
                        Use this form or set environment variables locally.<br><br>
                        <strong>âš ï¸ HTTPS Required:</strong> Kite requires HTTPS URLs. Render provides this automatically.<br><br>
                        Get your API credentials from <a href="https://developers.kite.trade/" target="_blank">Kite Developer Portal</a>
                    </p>
                </div>
            </div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-value" id="totalCount">0</div>
                <div class="stat-label">Total Announcements</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="newCount">0</div>
                <div class="stat-label">New Today</div>
            </div>
        </div>

        <div class="announcements-container">
            <h2>Latest Announcements</h2>
            <div id="announcementsList" class="announcements-list">
                <div class="empty-state">No announcements yet. Click "Start Monitoring" to begin.</div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>

